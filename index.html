<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CholloTracker - Amazon vs Competencia</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f3f3f3; margin: 0; }
        header { background-color: #232f3e; color: white; padding: 1.5rem; text-align: center; shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
        .card { background: white; border-radius: 10px; padding: 1.5rem; border: 1px solid #ddd; text-align: center; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .card img { max-width: 100%; height: 200px; object-fit: contain; }
        .badge { background: #e67e22; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; }
        .price-amz { color: #B12704; font-size: 1.5rem; font-weight: bold; margin: 10px 0; }
        .price-comp { color: #565959; text-decoration: line-through; font-size: 0.9rem; }
        .btn { display: block; background: #ffd814; color: black; text-decoration: none; padding: 12px; border-radius: 25px; font-weight: bold; margin-top: 1rem; border: 1px solid #fcd200; }
        footer { background: white; padding: 2rem; text-align: center; border-top: 1px solid #ddd; margin-top: 4rem; color: #666; font-size: 0.8rem; }
    </style>
</head>
<body>

<header>
    <h1>CholloTracker</h1>
    <p id="status">Buscando las mejores ofertas...</p>
</header>

<div class="container">
    <div id="grid" class="grid"></div>
</div>

<footer>
    <p>Aviso: Los precios pueden variar. Como afiliado de Amazon, percibo dinero con las compras elegibles.</p>
</footer>


<script>
    fetch('data.json')
        .then(res => res.json())
        .then(data => {
            const container = document.getElementById('productos');
            // Agrupamos por categoría
            const categorias = [...new Set(data.productos.map(p => p.categoria))];
            
            categorias.forEach(cat => {
                const seccion = document.createElement('div');
                seccion.innerHTML = `<h2>Sección: ${cat}</h2><div class="grid" id="cat-${cat}"></div>`;
                container.appendChild(seccion);
                
                data.productos.filter(p => p.categoria === cat).forEach(p => {
                    document.getElementById(`cat-${cat}`).innerHTML += `
                        <div class="card">
                            <img src="${p.imagen}">
                            <h3>${p.nombre}</h3>
                            <p class="price-amz">${p.precio_amazon}€</p>
                            <a href="${p.url_afiliado}" class="btn">Comprar</a>
                        </div>`;
                });
            });
        });
</script>
</body>
</html>
