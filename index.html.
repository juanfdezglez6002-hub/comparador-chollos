<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CholloTracker - Amazon vs Competencia</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f3f3f3; margin: 0; }
        header { background-color: #232f3e; color: white; padding: 1.5rem; text-align: center; shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .container { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
        .card { background: white; border-radius: 10px; padding: 1.5rem; border: 1px solid #ddd; text-align: center; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .card img { max-width: 100%; height: 200px; object-fit: contain; }
        .badge { background: #e67e22; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; }
        .price-amz { color: #B12704; font-size: 1.5rem; font-weight: bold; margin: 10px 0; }
        .price-comp { color: #565959; text-decoration: line-through; font-size: 0.9rem; }
        .btn { display: block; background: #ffd814; color: black; text-decoration: none; padding: 12px; border-radius: 25px; font-weight: bold; margin-top: 1rem; border: 1px solid #fcd200; }
        footer { background: white; padding: 2rem; text-align: center; border-top: 1px solid #ddd; margin-top: 4rem; color: #666; font-size: 0.8rem; }
    </style>
</head>
<body>

<header>
    <h1>CholloTracker</h1>
    <p id="status">Buscando las mejores ofertas...</p>
</header>

<div class="container">
    <div id="grid" class="grid"></div>
</div>

<footer>
    <p>Aviso: Los precios pueden variar. Como afiliado de Amazon, percibo dinero con las compras elegibles.</p>
</footer>

<script>
    fetch('data.json')
        .then(res => res.json())
        .then(data => {
            document.getElementById('status').innerText = "Última actualización: " + data.last_updated;
            const grid = document.getElementById('grid');
            if(data.productos.length === 0) {
                grid.innerHTML = "<h3>Hoy no hay diferencias de precio detectadas. ¡Vuelve pronto!</h3>";
                return;
            }
            data.productos.forEach(p => {
                grid.innerHTML += `
                    <div class="card">
                        <span class="badge">Ahorras ${p.ahorro_porcentaje}%</span>
                        <img src="${p.imagen}" alt="Producto">
                        <h3>${p.nombre}</h3>
                        <p class="price-comp">En ${p.tienda_competencia}: ${p.precio_competencia}€</p>
                        <p class="price-amz">Amazon: ${p.precio_amazon}€</p>
                        <a href="${p.url_afiliado}" class="btn">Ver Chollo en Amazon</a>
                    </div>
                `;
            });
        }).catch(() => {
            document.getElementById('grid').innerHTML = "<h3>Esperando la primera carga de datos del robot...</h3>";
        });
</script>
</body>
</html>
